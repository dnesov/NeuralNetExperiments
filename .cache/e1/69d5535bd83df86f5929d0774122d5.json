{"id":"node_modules/brain.js/dist/recurrent/matrix/softmax.js","dependencies":[{"name":"C:\\Users\\dnesov\\Documents\\GitHub\\NeuralNetExperiments\\node_modules\\brain.js\\dist\\recurrent\\matrix\\softmax.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\dnesov\\Documents\\GitHub\\NeuralNetExperiments\\package.json","includedInParent":true,"mtime":1555160889145},{"name":"C:\\Users\\dnesov\\Documents\\GitHub\\NeuralNetExperiments\\node_modules\\brain.js\\package.json","includedInParent":true,"mtime":1555160889068},{"name":"./","loc":{"line":8,"column":16},"parent":"C:\\Users\\dnesov\\Documents\\GitHub\\NeuralNetExperiments\\node_modules\\brain.js\\dist\\recurrent\\matrix\\softmax.js","resolved":"C:\\Users\\dnesov\\Documents\\GitHub\\NeuralNetExperiments\\node_modules\\brain.js\\dist\\recurrent\\matrix\\index.js"}],"generated":{"js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = softmax;\n\nvar _ = require('./');\n\nvar _2 = _interopRequireDefault(_);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n *\n * @param {Matrix} m\n * @returns {Matrix}\n */\nfunction softmax(m) {\n  var result = new _2.default(m.rows, m.columns); // probability volume\n  var maxVal = -999999;\n  for (var i = 0; i < m.weights.length; i++) {\n    if (m.weights[i] > maxVal) {\n      maxVal = m.weights[i];\n    }\n  }\n\n  var s = 0;\n  for (var _i = 0; _i < m.weights.length; _i++) {\n    result.weights[_i] = Math.exp(m.weights[_i] - maxVal);\n    s += result.weights[_i];\n  }\n\n  for (var _i2 = 0; _i2 < m.weights.length; _i2++) {\n    result.weights[_i2] /= s;\n  }\n\n  // no backward pass here needed\n  // since we will use the computed probabilities outside\n  // to set gradients directly on m\n  return result;\n}\n","map":{"version":3,"sources":["../../../src/recurrent/matrix/softmax.js"],"names":["softmax","m","result","Matrix","rows","columns","maxVal","i","weights","length","s","Math","exp"],"mappings":";;;;;kBAOwBA,O;;AAPxB;;;;;;AAEA;;;;;AAKe,SAASA,OAAT,CAAiBC,CAAjB,EAAoB;AACjC,MAAIC,SAAS,IAAIC,UAAJ,CAAWF,EAAEG,IAAb,EAAmBH,EAAEI,OAArB,CAAb,CADiC,CACW;AAC5C,MAAIC,SAAS,CAAC,MAAd;AACA,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIN,EAAEO,OAAF,CAAUC,MAA9B,EAAsCF,GAAtC,EAA2C;AACzC,QAAGN,EAAEO,OAAF,CAAUD,CAAV,IAAeD,MAAlB,EAA0B;AACxBA,eAASL,EAAEO,OAAF,CAAUD,CAAV,CAAT;AACD;AACF;;AAED,MAAIG,IAAI,CAAR;AACA,OAAK,IAAIH,KAAI,CAAb,EAAgBA,KAAIN,EAAEO,OAAF,CAAUC,MAA9B,EAAsCF,IAAtC,EAA2C;AACzCL,WAAOM,OAAP,CAAeD,EAAf,IAAoBI,KAAKC,GAAL,CAASX,EAAEO,OAAF,CAAUD,EAAV,IAAeD,MAAxB,CAApB;AACAI,SAAKR,OAAOM,OAAP,CAAeD,EAAf,CAAL;AACD;;AAED,OAAK,IAAIA,MAAI,CAAb,EAAgBA,MAAIN,EAAEO,OAAF,CAAUC,MAA9B,EAAsCF,KAAtC,EAA2C;AACzCL,WAAOM,OAAP,CAAeD,GAAf,KAAqBG,CAArB;AACD;;AAED;AACA;AACA;AACA,SAAOR,MAAP;AACD","file":"softmax.js","sourcesContent":["import Matrix from './';\n\n/**\n *\n * @param {Matrix} m\n * @returns {Matrix}\n */\nexport default function softmax(m) {\n  let result = new Matrix(m.rows, m.columns); // probability volume\n  let maxVal = -999999;\n  for (let i = 0; i < m.weights.length; i++) {\n    if(m.weights[i] > maxVal) {\n      maxVal = m.weights[i];\n    }\n  }\n\n  let s = 0;\n  for (let i = 0; i < m.weights.length; i++) {\n    result.weights[i] = Math.exp(m.weights[i] - maxVal);\n    s += result.weights[i];\n  }\n\n  for (let i = 0; i < m.weights.length; i++) {\n    result.weights[i] /= s;\n  }\n\n  // no backward pass here needed\n  // since we will use the computed probabilities outside\n  // to set gradients directly on m\n  return result;\n}\n"]}},"hash":"2d71e280436ce4031fb0286d8c07ed7e","cacheData":{"env":{}}}